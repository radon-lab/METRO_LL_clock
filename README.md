# METRO_LL_clock

Ссылка на проект - https://community.alexgyver.ru/threads/zaversheno-naruchnye-chasy-iz-metro-last-light.3440/

Инструкция по использованию прошивки:

По умолчанию сразу после прошивки часы выключены, для включения питания нужно зажать правую кнопку (далее "ПК"), часы включатся, инициализируются и покажут время.

Для выхода из сна достаточно нажать кратковременно любую кнопку.

При достижении порогового значения заряда акб (по умолчанию 10%) часы перед отображением времени будут выдавать сообщение (LO), при достижении критического значения (по умолчанию 5%) часы сохранят последнее время в память и выключатся.


Использование фоторезистора опционально, если убрать его и 2 резистора в его обвязке, то можно продлить время автономной работы(потребление снизится примерно с 30мкА до 1мкА), если фоторезистор не установлен то нужно установить пункт в "config.h" - "USE_LIGHT_SENS" в "0", при этом будут недоступны функции авто яркости и авто вкл/выкл колбы.


Управление:

В режиме отображения времени/заряда акб /даты:

    Нажатие "ЛК": переход в режим таймера.
    Нажатие "ПК": переключение режимов – время/заряд акб /дата.
    Удержание "ЛК": настройка времени.
    Удержание "ПК": настройка индикации.

В режиме отображения таймера:

    Нажатие "ЛК": запуск/остановка таймера.
    Нажатие "ПК": выход к отображению времени(если таймер был запущен, то отсчет продолжится, а по истечению времени сам вернётся в режим таймера).
    Удержание "ЛК": сброс таймера.
    Удержание "ПК": настройка таймера.



Настройка времени: В режиме отображения времени/заряда акб/даты - удержание левой кнопки(далее "ЛК").

Изменение значения в большую сторону производится нажатием на "ПК", нажатие "ЛК" уменьшает значение. Для переключения на следующий пункт удерживайте "ЛК", для выхода из настроек удерживайте "ПК". Пункты меню: ЧЧ->ММ->ДЕНЬ->МЕСЯЦ->ГОД.

Настройка индикации: В режиме отображения времени/заряда акб/даты - удержание "ПК".

- Пункт (FL) управляет колбой:

    0 - всегда выкл.
    1 - всегда вкл.
    2 - управляется датчиком, зажигается на свету, гаснет в тени.

- Пункт (SL) значение в секундах сколько часы будут отображать время после пробуждения:

    0 - отключает сон, режим постоянной индикации.
    3-15 время отключения индикаторов в сек.

- Пункт (Аn) анимация при показе времени:

    0 – без эффекта.
    1 - перебор всех цифр "вверх" до полного круга.
    2 - перебор "вниз" от 9 до необходимых цифр.
    3 - режим "поезд".
    4 - режим "резинка".
    5 - режим "перекидные часы".
    6 - последовательное выпадение каждого числа сверху вниз.

- Пункт (br) отвечает за яркость индикации:

    0 - статичная яркость.
    1 - затемнение по заданному времени.
    2 - от датчика освещённости

В зависимости от выбранного значения (br) следующие пункты меняются:
- (br - 0):

    (L) - Установка уровня статичной яркости(1-5).

- (br - 1):

    (N) - время когда включается ночная яркость(0-23).
    (L) - значение ночной яркости(1-5).
    (d) - время когда включается дневная яркость(0-23).
    (L) - значение дневной яркости(1-5).

- (br - 2):

    (N) - пункт ночь, для калибровки поместить часы в тень, нажать "ЛК" или "ПК", произойдет сброс до текущего значения и подождать 3-5сек.
    (d) - пункт день, для калибровки поместить часы на свет, нажать "ЛК" или "ПК", произойдет сброс до текущего значения и подождать 3-5сек.



Настройка таймера: В режиме отображения таймера - удержание "ПК".

    Пункт (p) устанавливает режим(t - таймер | s - секундомер).
    Пункт (t) устанавливает время таймера в минутах.
    Пункт (b) устанавливает сколько секунд перед окончанием отсчета будет активна индикация.
